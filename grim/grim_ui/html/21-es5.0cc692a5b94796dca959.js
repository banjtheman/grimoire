function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"ct+p":function(e,t,o){"use strict";o.r(t);var n=o("ofXK"),r=o("c7TG"),c=o("3Pt+"),i=o("tyNb"),s=o("mrSG"),a=o("tk/3"),l=o("7pIB"),u=o("FAH8"),h=o("POSt"),b=o("AytR"),p=o("K1OG"),d=o("LJOF"),f=o("fXoL");function m(e,t){if(1&e){var o=f.ac();f.Zb(0,"ion-col",5),f.Zb(1,"ion-card"),f.Zb(2,"ion-card-header"),f.Zb(3,"ion-card-title"),f.Zb(4,"h1"),f.uc(5),f.Yb(),f.Yb(),f.Yb(),f.Zb(6,"ion-card-content"),f.Zb(7,"h2"),f.uc(8),f.Yb(),f.Zb(9,"ion-row"),f.Zb(10,"ion-col",6),f.Zb(11,"div",7),f.Zb(12,"ion-button",8),f.hc("click",(function(e){f.qc(o);var n=t.$implicit;return f.jc().viewProject(n)})),f.Xb(13,"ion-icon",9),f.Zb(14,"b"),f.uc(15,"Spells"),f.Yb(),f.Yb(),f.Zb(16,"span",10),f.uc(17,"Conjure Spells"),f.Yb(),f.Yb(),f.Yb(),f.Zb(18,"ion-col",6),f.Zb(19,"div",7),f.Zb(20,"ion-button",11),f.hc("click",(function(e){f.qc(o);var n=t.$implicit;return f.jc().deleteProjectAlertConfirm(n)})),f.Xb(21,"ion-icon",12),f.Yb(),f.Zb(22,"span",10),f.uc(23,"Delete Project"),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Yb()}if(2&e){var n=t.$implicit;f.Mb(5),f.xc("",n.name," - ",n.desc,""),f.Mb(3),f.wc("Created: ",n.createdAt,"")}}var g,v=((g=function(){function e(t,o,n,r,c,i,s,a){_classCallCheck(this,e),this.magicService=t,this.navCtrl=o,this.http=n,this.file_writer=r,this.modalController=c,this.loadingCtrl=i,this.alertController=s,this.utilityService=a,this.api_url=b.a.api_url,this.uploader=new l.c({}),this.hasBaseDropZoneOver=!1,this.hasAnotherDropZoneOver=!1,this.spell_tomb={},this.healthCheck(),this.getProjects()}return _createClass(e,[{key:"healthCheck",value:function(){var e=this;console.log("health check");var t=new a.c({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});this.http.get(this.api_url+"/health",{headers:t}).toPromise().then((function(t){console.log(t),e.health=t.healthy}),(function(t){console.log("ok we should back out"),console.log(t),e.utilityService.presentModelAlert("Error try again")}))}},{key:"deleteProjectAlertConfirm",value:function(e){return Object(s.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var o,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({header:"Are you sure you want to delete Project?",animated:!0,cssClass:"alertbox",mode:"ios",message:e.name+" will be deleted!!!",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(e){console.log("Confirm Cancel: blah")}},{text:"Yes",handler:function(){console.log("Confirm Okay"),n.deleteProject(e)}}]});case 2:return o=t.sent,t.next=5,o.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"deleteProject",value:function(e){var t=this;console.log("delete project");var o=new a.c({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});this.http.delete(this.api_url+"/delete_project?project_name="+e.name,{headers:o}).toPromise().then((function(e){console.log(e),t.utilityService.presentModelAlert("Project Deleted"),t.getProjects()}),(function(e){console.log("ok we should back out"),console.log(e),t.utilityService.presentModelAlert("Error try again")}))}},{key:"newProject",value:function(){return Object(s.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("New Project clicked"),e.next=3,this.modalController.create({component:h.a});case 3:return(t=e.sent).onDidDismiss().then((function(e){o.getProjects()})),e.next=7,t.present();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})))}},{key:"viewProject",value:function(e){console.log("going to project page"),this.magicService.isBlank=!1,this.magicService.Data.curr_project=e,this.navCtrl.navigateForward("/project-mana")}},{key:"getProjects",value:function(){var e=this;console.log("getting projects");var t=new a.c({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});this.http.get(this.api_url+"/get_projects",{headers:t}).toPromise().then((function(t){console.log(t),e.projects=t.projects,console.log(e.projects)}),(function(t){console.log("ok we should back out"),console.log(t),e.utilityService.presentModelAlert("Error try again")}))}},{key:"keys",value:function(e){return Object.keys(e)}},{key:"values",value:function(e){return Object.values(e)}},{key:"addManaSource",value:function(){var e=this;console.log("add mana source");var t=new a.c({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});this.http.get(this.api_url+"/add_mana_source?project_name="+this.projectName,{headers:t}).toPromise().then((function(e){console.log(e)}),(function(t){console.log("ok we should back out"),console.log(t),e.utilityService.presentModelAlert("Error try again")}))}},{key:"presentAlert",value:function(){return Object(s.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Error",message:"Must upload valid csv file",buttons:["OK"]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||g)(f.Wb(p.a),f.Wb(r.G),f.Wb(a.a),f.Wb(u.a),f.Wb(r.F),f.Wb(r.E),f.Wb(r.a),f.Wb(d.a))},g.\u0275cmp=f.Qb({type:g,selectors:[["app-home"]],features:[f.Lb([u.a])],decls:15,vars:1,consts:[["text-center",""],["col-md-4","","class","project-content","size-sm","12","size-md","3","text-center","",4,"ngFor","ngForOf"],["size-sm","12","size-md","3"],["text-center","",3,"click"],["slot","icon-only","color","primary","name","add-circle-outline",1,"item","new_icon"],["col-md-4","","size-sm","12","size-md","3","text-center","",1,"project-content"],[1,"proj_col"],[1,"tooltip"],["shape","round","color","primary",3,"click"],["slot","start","name","eye"],[1,"tooltiptext"],["shape","round","color","medium",3,"click"],["name","trash"]],template:function(e,t){1&e&&(f.Zb(0,"ion-header"),f.Zb(1,"ion-toolbar"),f.Zb(2,"ion-title"),f.uc(3," Grimoire "),f.Yb(),f.Yb(),f.Yb(),f.Zb(4,"ion-content"),f.Zb(5,"h1",0),f.uc(6,"Projects"),f.Yb(),f.Zb(7,"ion-list"),f.Zb(8,"ion-grid"),f.Zb(9,"ion-row"),f.tc(10,m,24,3,"ion-col",1),f.Zb(11,"ion-col",2),f.Zb(12,"ion-card",3),f.hc("click",(function(e){return t.newProject()})),f.Zb(13,"ion-card-content"),f.Xb(14,"ion-icon",4),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Yb()),2&e&&(f.Mb(10),f.mc("ngForOf",t.projects))},directives:[r.n,r.B,r.A,r.l,r.b,r.s,r.m,r.u,n.h,r.k,r.f,r.g,r.o,r.h,r.j,r.d],styles:[".new_icon[_ngcontent-%COMP%]{font-size:100px}.item[_ngcontent-%COMP%]:hover{opacity:.5}"]}),g);o.d(t,"HomePageModule",(function(){return y}));var j,y=((j=function e(){_classCallCheck(this,e)}).\u0275mod=f.Ub({type:j}),j.\u0275inj=f.Tb({factory:function(e){return new(e||j)},imports:[[n.b,c.a,r.C,l.b,i.i.forChild([{path:"",component:v}])]]}),j)}}]);