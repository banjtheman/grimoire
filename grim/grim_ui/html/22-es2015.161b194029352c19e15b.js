(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{SA3j:function(e,t,o){"use strict";o.r(t);var n=o("ofXK"),i=o("3Pt+"),c=o("c7TG"),l=o("tyNb"),s=o("mrSG"),b=o("K1OG"),r=o("LJOF"),a=o("7pIB"),u=o("FAH8"),p=o("tk/3"),d=o("AytR"),h=o("fXoL"),m=o("njyG");function g(e,t){if(1&e){const e=h.ac();h.Zb(0,"ion-col",9),h.Zb(1,"ion-card",1),h.hc("click",(function(o){h.qc(e);const n=t.$implicit;return h.jc(2).set_source(n)})),h.Zb(2,"ion-card-header"),h.Zb(3,"ion-title",6),h.Zb(4,"h1"),h.uc(5),h.Yb(),h.Yb(),h.Yb(),h.Zb(6,"ion-card-content",6),h.uc(7," Data Source "),h.Yb(),h.Yb(),h.Yb()}if(2&e){const e=t.$implicit;h.Mb(5),h.vc(e.file_name)}}function Y(e,t){if(1&e){const e=h.ac();h.Zb(0,"ion-col",11),h.Zb(1,"ion-list"),h.Zb(2,"ion-item"),h.Zb(3,"ion-label"),h.uc(4,"File Upload"),h.Yb(),h.Zb(5,"input",12),h.hc("click",(function(t){return h.qc(e),h.jc(2).clearQueue()})),h.Yb(),h.Yb(),h.Zb(6,"ion-item"),h.Zb(7,"ion-button",13),h.hc("click",(function(t){return h.qc(e),h.jc(2).submitCSV()})),h.Zb(8,"b"),h.uc(9,"Upload CSV"),h.Yb(),h.Yb(),h.Yb(),h.Yb(),h.Yb()}if(2&e){const e=h.jc(2);h.Mb(5),h.mc("uploader",e.uploader)}}function Z(e,t){if(1&e){const e=h.ac();h.Zb(0,"div"),h.Zb(1,"ion-label"),h.uc(2,"CSV Name"),h.Yb(),h.Zb(3,"ion-input",19),h.hc("ngModelChange",(function(t){h.qc(e);const o=h.jc(2).$implicit;return h.jc(6).spell_tomb[o.input_name]=t})),h.Yb(),h.Yb()}if(2&e){const e=h.jc(2).$implicit,t=h.jc(6);h.Mb(3),h.nc("value",t.current_source.file_name),h.mc("ngModel",t.spell_tomb[e.input_name])}}function f(e,t){1&e&&h.Xb(0,"div")}function _(e,t){1&e&&h.Xb(0,"div")}function M(e,t){if(1&e&&(h.Zb(0,"div"),h.Zb(1,"h2"),h.uc(2,"Mana source"),h.Yb(),h.uc(3),h.tc(4,Z,4,2,"div",5),h.tc(5,f,1,0,"div",5),h.tc(6,_,1,0,"div",5),h.Yb()),2&e){const e=h.jc().$implicit;h.Mb(3),h.xc(" ",e.input_name," - ",e.info," "),h.Mb(1),h.mc("ngIf",e.takesCSV),h.Mb(1),h.mc("ngIf",e.takesDB),h.Mb(1),h.mc("ngIf",e.takesAPI)}}function w(e,t){if(1&e&&(h.Zb(0,"ion-select-option",22),h.uc(1),h.Yb()),2&e){const e=t.$implicit;h.nc("value",e),h.Mb(1),h.wc("",e," ")}}function v(e,t){if(1&e){const e=h.ac();h.Zb(0,"div"),h.uc(1),h.Zb(2,"ion-label"),h.uc(3,"Column Input"),h.Yb(),h.Zb(4,"ion-select",20),h.hc("ngModelChange",(function(t){h.qc(e);const o=h.jc().$implicit;return h.jc(6).spell_tomb[o.input_name]=t})),h.tc(5,w,2,2,"ion-select-option",21),h.Yb(),h.Yb()}if(2&e){const e=h.jc().$implicit,t=h.jc(6);h.Mb(1),h.xc(" ",e.input_name," - ",e.info," "),h.Mb(3),h.mc("ngModel",t.spell_tomb[e.input_name]),h.Mb(1),h.mc("ngForOf",t.current_source.cols)}}function j(e,t){if(1&e&&(h.Zb(0,"ion-item"),h.tc(1,M,7,5,"div",5),h.tc(2,v,6,4,"div",5),h.Yb()),2&e){const e=t.$implicit;h.Mb(1),h.mc("ngIf",e.takesMana),h.Mb(1),h.mc("ngIf",e.takesCSVCol)}}function C(e,t){if(1&e&&(h.Zb(0,"ion-card-content",6),h.uc(1," Spell inputs: "),h.Zb(2,"ion-list"),h.tc(3,j,3,2,"ion-item",16),h.Yb(),h.Yb()),2&e){const e=h.jc().$implicit;h.Mb(3),h.mc("ngForOf",e.spell_inputs_metadata)}}function y(e,t){if(1&e&&(h.Zb(0,"ion-card"),h.Zb(1,"ion-card-header",6),h.Zb(2,"ion-card-title"),h.uc(3),h.Yb(),h.Zb(4,"ion-card-subtitle"),h.uc(5),h.Yb(),h.Yb(),h.tc(6,C,4,1,"ion-card-content",18),h.Yb()),2&e){const e=t.$implicit,o=t.index;h.Mb(3),h.xc(" ",e.spell_type," - ",e.spell_name," "),h.Mb(2),h.wc(" ",e.spell_info," "),h.Mb(1),h.mc("ngIf",0==o)}}function k(e,t){if(1&e){const e=h.ac();h.Zb(0,"ion-col",15),h.Zb(1,"ion-card"),h.Zb(2,"ion-card-header",6),h.Zb(3,"ion-card-title"),h.uc(4),h.Yb(),h.Zb(5,"ion-card-subtitle"),h.uc(6),h.Yb(),h.Yb(),h.Zb(7,"ion-card-content"),h.tc(8,y,7,4,"ion-card",16),h.Zb(9,"div",6),h.Zb(10,"ion-button",17),h.hc("click",(function(o){h.qc(e);const n=t.index;return h.jc(3).cast_grim(n)})),h.uc(11,"Cast Spells"),h.Yb(),h.Yb(),h.Yb(),h.Yb(),h.Yb()}if(2&e){const e=t.$implicit;h.Mb(4),h.wc(" ",e.name," "),h.Mb(2),h.wc(" ",e.value," "),h.Mb(2),h.mc("ngForOf",e.spells)}}function S(e,t){if(1&e&&(h.Zb(0,"ion-grid"),h.Zb(1,"h1",6),h.uc(2,"Grimoires"),h.Yb(),h.Zb(3,"ion-row"),h.tc(4,k,12,3,"ion-col",14),h.Yb(),h.Yb()),2&e){const e=h.jc(2);h.Mb(4),h.mc("ngForOf",e.grims)}}function O(e,t){if(1&e){const e=h.ac();h.Zb(0,"tr"),h.Zb(1,"td"),h.uc(2),h.Yb(),h.Zb(3,"td"),h.uc(4),h.Yb(),h.Zb(5,"td"),h.uc(6),h.Yb(),h.Zb(7,"td"),h.uc(8),h.Yb(),h.Zb(9,"td"),h.Zb(10,"ion-button",17),h.hc("click",(function(o){h.qc(e);const n=t.$implicit;return h.jc(3).viewCast(n)})),h.uc(11,"View Cast"),h.Yb(),h.Yb(),h.Yb()}if(2&e){const e=t.$implicit;h.Mb(2),h.vc(e.grim_name),h.Mb(2),h.vc(e.grim_value),h.Mb(2),h.vc(e.mana_source),h.Mb(2),h.vc(e.timestamp)}}function I(e,t){if(1&e&&(h.Zb(0,"div"),h.Zb(1,"table",23),h.Zb(2,"thead"),h.Zb(3,"tr"),h.Zb(4,"th"),h.uc(5,"Grimoire"),h.Yb(),h.Zb(6,"th"),h.uc(7,"Purpose"),h.Yb(),h.Zb(8,"th"),h.uc(9,"Mana Source"),h.Yb(),h.Zb(10,"th"),h.uc(11,"Timestamp"),h.Yb(),h.Zb(12,"th"),h.uc(13,"View Cast"),h.Yb(),h.Yb(),h.Yb(),h.Zb(14,"tbody"),h.tc(15,O,12,4,"tr",16),h.Yb(),h.Yb(),h.Yb()),2&e){const e=h.jc(2);h.Mb(1),h.mc("dtOptions",e.dtOptions),h.Mb(14),h.mc("ngForOf",e.casts)}}function A(e,t){if(1&e){const e=h.ac();h.Zb(0,"div"),h.Zb(1,"ion-grid"),h.Zb(2,"h1",6),h.uc(3,"Mana sources"),h.Yb(),h.Zb(4,"ion-row"),h.tc(5,g,8,1,"ion-col",7),h.Yb(),h.Zb(6,"h2",6),h.uc(7,"Add new Source"),h.Yb(),h.Zb(8,"ion-row"),h.Zb(9,"ion-col",8),h.Zb(10,"ion-card",1),h.hc("click",(function(t){return h.qc(e),h.jc().change_mana_type("csv")})),h.Zb(11,"ion-card-header"),h.Zb(12,"ion-title",6),h.Zb(13,"h1"),h.uc(14,"CSV"),h.Yb(),h.Yb(),h.Yb(),h.Zb(15,"ion-card-content",6),h.uc(16," Upload a CSV file "),h.Yb(),h.Yb(),h.Yb(),h.Zb(17,"ion-col",9),h.Zb(18,"ion-card",1),h.hc("click",(function(t){return h.qc(e),h.jc().change_mana_type("db")})),h.Zb(19,"ion-card-header"),h.Zb(20,"ion-title",6),h.Zb(21,"h1"),h.uc(22,"Database"),h.Yb(),h.Yb(),h.Yb(),h.Zb(23,"ion-card-content",6),h.uc(24," Pull from a Database "),h.Yb(),h.Yb(),h.Yb(),h.Zb(25,"ion-col",9),h.Zb(26,"ion-card",1),h.hc("click",(function(t){return h.qc(e),h.jc().change_mana_type("api")})),h.Zb(27,"ion-card-header"),h.Zb(28,"ion-title",6),h.Zb(29,"h1"),h.uc(30,"API"),h.Yb(),h.Yb(),h.Yb(),h.Zb(31,"ion-card-content",6),h.uc(32," Hit api endpoint "),h.Yb(),h.Yb(),h.Yb(),h.Yb(),h.Xb(33,"br"),h.Xb(34,"br"),h.Zb(35,"ion-row"),h.tc(36,Y,10,1,"ion-col",10),h.Yb(),h.Yb(),h.tc(37,S,5,1,"ion-grid",5),h.Zb(38,"ion-grid"),h.Zb(39,"h1",6),h.uc(40,"Completed Spells"),h.Yb(),h.Zb(41,"ion-row"),h.Zb(42,"ion-col"),h.tc(43,I,16,2,"div",5),h.Yb(),h.Yb(),h.Yb(),h.Yb()}if(2&e){const e=h.jc();h.Mb(5),h.mc("ngForOf",e.mana_sources),h.Mb(31),h.mc("ngIf","csv"==e.mana_type),h.Mb(1),h.mc("ngIf",e.current_source),h.Mb(6),h.mc("ngIf",e.showCasts)}}function F(e,t){if(1&e&&(h.Zb(0,"div"),h.Zb(1,"h2"),h.Zb(2,"b"),h.uc(3),h.Yb(),h.Yb(),h.Zb(4,"table",31),h.Zb(5,"thead"),h.Zb(6,"tr"),h.Zb(7,"th"),h.uc(8,"Input Info"),h.Yb(),h.Zb(9,"th"),h.uc(10,"Example value"),h.Yb(),h.Yb(),h.Yb(),h.Zb(11,"tbody"),h.Zb(12,"tr"),h.Zb(13,"td"),h.uc(14),h.Yb(),h.Zb(15,"td"),h.uc(16),h.Yb(),h.Yb(),h.Yb(),h.Yb(),h.Yb()),2&e){const e=t.$implicit;h.Mb(3),h.wc("Spell Input: ",e.input_name,""),h.Mb(11),h.wc(" ",e.info," "),h.Mb(2),h.wc(" ",e.example," ")}}function G(e,t){if(1&e&&(h.Zb(0,"ion-col",30),h.Zb(1,"ion-card"),h.Zb(2,"ion-card-header",6),h.Zb(3,"ion-card-title"),h.uc(4),h.Yb(),h.Zb(5,"ion-card-subtitle"),h.uc(6),h.Yb(),h.Yb(),h.Zb(7,"ion-card-content",6),h.tc(8,F,17,3,"div",16),h.Yb(),h.Yb(),h.Yb()),2&e){const e=t.$implicit,o=h.jc(3);h.Mb(4),h.xc(" ",o.spells_dict[e].spell_type," - ",o.spells_dict[e].spell_name," "),h.Mb(2),h.wc(" ",o.spells_dict[e].spell_info," "),h.Mb(2),h.mc("ngForOf",o.spells_dict[e].spell_inputs_metadata)}}function x(e,t){if(1&e&&(h.Zb(0,"div"),h.Zb(1,"h3"),h.uc(2),h.Yb(),h.Zb(3,"h3"),h.uc(4),h.Yb(),h.Zb(5,"h3"),h.uc(6),h.Yb(),h.Zb(7,"ul"),h.Zb(8,"li"),h.uc(9),h.Yb(),h.Zb(10,"li"),h.uc(11),h.Yb(),h.Zb(12,"li"),h.uc(13),h.Yb(),h.Zb(14,"li"),h.uc(15),h.Yb(),h.Yb(),h.Yb()),2&e){const e=t.$implicit;h.Mb(2),h.wc("Spell Input: ",e.input_name,""),h.Mb(2),h.wc("Input Info: ",e.info,""),h.Mb(2),h.wc("Example Value: ",e.example,""),h.Mb(3),h.wc("takesMana: ",e.takesMana," "),h.Mb(2),h.wc("takesCSV: ",e.takesCSV," "),h.Mb(2),h.wc("takesAPI: ",e.takesAPI," "),h.Mb(2),h.wc("takesDB: ",e.takesDB," ")}}function q(e,t){if(1&e){const e=h.ac();h.Zb(0,"ion-button",17),h.hc("click",(function(t){h.qc(e);const o=h.jc().$implicit;return h.jc(3).addToGrim(o)})),h.uc(1,"Add to Grimoire "),h.Yb()}}function $(e,t){if(1&e){const e=h.ac();h.Zb(0,"ion-button",34),h.hc("click",(function(t){h.qc(e);const o=h.jc().$implicit;return h.jc(3).removeFromGrim(o)})),h.uc(1,"Remove from Grimoire"),h.Yb()}}function P(e,t){if(1&e&&(h.Zb(0,"tr"),h.Zb(1,"td"),h.uc(2),h.Yb(),h.Zb(3,"td"),h.uc(4),h.Yb(),h.Zb(5,"td"),h.uc(6),h.Yb(),h.Zb(7,"td"),h.uc(8),h.Yb(),h.Zb(9,"td"),h.tc(10,x,16,7,"div",16),h.Yb(),h.Zb(11,"td"),h.uc(12),h.Yb(),h.Zb(13,"td"),h.tc(14,q,2,0,"ion-button",32),h.tc(15,$,2,0,"ion-button",33),h.Yb(),h.Yb()),2&e){const e=t.$implicit,o=h.jc(3);h.Mb(2),h.vc(e.spell_name),h.Mb(2),h.vc(e.spell_info),h.Mb(2),h.vc(e.spell_type),h.Mb(2),h.vc(e.has_user_spell_inputs),h.Mb(2),h.mc("ngForOf",e.spell_inputs_metadata),h.Mb(2),h.vc(e.spell_output),h.Mb(2),h.mc("ngIf",0==o.inNewGrim(e)),h.Mb(1),h.mc("ngIf",1==o.inNewGrim(e))}}function T(e,t){if(1&e){const e=h.ac();h.Zb(0,"div"),h.Xb(1,"br"),h.Xb(2,"br"),h.Zb(3,"ion-list",6),h.Zb(4,"ion-label"),h.uc(5,"Grimoire Name:"),h.Yb(),h.Zb(6,"ion-item"),h.Zb(7,"ion-input",25),h.hc("ngModelChange",(function(t){return h.qc(e),h.jc(2).new_grim_name=t})),h.Yb(),h.Yb(),h.Zb(8,"ion-label"),h.uc(9,"Grimoire Description:"),h.Yb(),h.Zb(10,"ion-item"),h.Zb(11,"ion-input",26),h.hc("ngModelChange",(function(t){return h.qc(e),h.jc(2).new_grim_desc=t})),h.Yb(),h.Yb(),h.Yb(),h.Zb(12,"ion-row"),h.tc(13,G,9,4,"ion-col",27),h.Yb(),h.Zb(14,"ion-button",28),h.hc("click",(function(t){return h.qc(e),h.jc(2).createGrim()})),h.uc(15,"Create Grimoire "),h.Yb(),h.Zb(16,"table",29),h.Zb(17,"thead"),h.Zb(18,"tr"),h.Zb(19,"th"),h.uc(20,"Spell Name"),h.Yb(),h.Zb(21,"th"),h.uc(22,"Spell Info"),h.Yb(),h.Zb(23,"th"),h.uc(24,"Spell Type"),h.Yb(),h.Zb(25,"th"),h.uc(26,"Has user inputs?"),h.Yb(),h.Zb(27,"th"),h.uc(28,"Spell Inputs"),h.Yb(),h.Zb(29,"th"),h.uc(30,"Spell Output"),h.Yb(),h.Zb(31,"th"),h.uc(32,"Add Spell"),h.Yb(),h.Yb(),h.Yb(),h.Zb(33,"tbody"),h.tc(34,P,16,8,"tr",16),h.Yb(),h.Yb(),h.Yb()}if(2&e){const e=h.jc(2);h.Mb(7),h.mc("ngModel",e.new_grim_name),h.Mb(4),h.mc("ngModel",e.new_grim_desc),h.Mb(2),h.mc("ngForOf",e.new_grim),h.Mb(3),h.mc("dtOptions",e.dtOptions),h.Mb(18),h.mc("ngForOf",e.spells)}}function D(e,t){1&e&&h.Xb(0,"div")}function V(e,t){if(1&e){const e=h.ac();h.Zb(0,"div"),h.Zb(1,"h2",6),h.uc(2,"Create new Grimoires"),h.Yb(),h.Zb(3,"ion-row"),h.Zb(4,"ion-col",24),h.Zb(5,"ion-card",1),h.hc("click",(function(t){return h.qc(e),h.jc().change_conjure_type("grim")})),h.Zb(6,"ion-card-header"),h.Zb(7,"ion-title",6),h.Zb(8,"h1"),h.uc(9,"Grimoire"),h.Yb(),h.Yb(),h.Yb(),h.Zb(10,"ion-card-content",6),h.uc(11," Collection of spells "),h.Yb(),h.Yb(),h.Yb(),h.Zb(12,"ion-col",15),h.Zb(13,"ion-card",1),h.hc("click",(function(t){return h.qc(e),h.jc().change_conjure_type("spell")})),h.Zb(14,"ion-card-header"),h.Zb(15,"ion-title",6),h.Zb(16,"h1"),h.uc(17,"Spell"),h.Yb(),h.Yb(),h.Yb(),h.Zb(18,"ion-card-content",6),h.uc(19," Indiviudal spell "),h.Yb(),h.Yb(),h.Yb(),h.Yb(),h.tc(20,T,35,5,"div",5),h.tc(21,D,1,0,"div",5),h.Yb()}if(2&e){const e=h.jc();h.Mb(20),h.mc("ngIf","grim"==e.conjure_type),h.Mb(1),h.mc("ngIf","spell"==e.conjure_type)}}const z=[{path:"",component:(()=>{class e{constructor(e,t,o,n,i,c){this.http=e,this.magicService=t,this.navCtrl=o,this.utilityService=n,this.file_writer=i,this.alertController=c,this.uploader=new a.c({}),this.api_url=d.a.api_url,this.current_source=null,this.showResults=!1,this.showCasts=!1,this.spell_mode="cast",this.new_grim=[],this.spells_dict={},this.dtOptions={},this.spell_tomb={},this.dtOptions={pageLength:20}}segmentChanged(e){console.log("Segment changed",e),this.spell_mode=e.detail.value,console.log(this.spell_mode)}createGrim(){console.log("Creating grim");let e=new p.c({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});var t=[];this.new_grim.forEach(e=>{t.push(this.spells_dict[e])});var o={};o.name=this.new_grim_name,o.value=this.new_grim_desc,o.spells=t;var n=this.api_url+"/create_grim?project_name="+this.project.name;console.log("calling this url: "+n),this.http.post(n,o,{headers:e}).toPromise().then(e=>{console.log(e),this.showResults=!0,this.results=e,this.get_grims()},e=>{console.log("ok we should back out"),console.log(e)})}inNewGrim(e){return-1!=this.new_grim.indexOf(e.spell_type+"_"+e.spell_name)}removeFromGrim(e){var t=this.new_grim.indexOf(e.spell_type+"_"+e.spell_name);this.new_grim.splice(t,1)}addToGrim(e){this.new_grim.push(e.spell_type+"_"+e.spell_name)}ngOnInit(){this.magicService.isBlank&&(console.log("return"),window.location.href="/"),this.project=this.magicService.Data.curr_project,console.log(this.project),this.getSources(),this.get_grims(),this.get_spells(),this.getCasts()}viewCast(e){console.log("viewing cast"),console.log(e),this.magicService.Data.curr_cast=e,this.navCtrl.navigateForward("/view-cast")}getCasts(){console.log("getting casts");let e=new p.c({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});this.http.get(this.api_url+"/get_casts?project_name="+this.project.name,{headers:e}).toPromise().then(e=>{console.log(e),this.casts=e.casts,console.log(this.casts),this.showCasts=!0},e=>{console.log("ok we should back out"),console.log(e),this.utilityService.presentModelAlert("Error try again")})}getSources(){console.log("getting mana sources");let e=new p.c({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});this.http.get(this.api_url+"/get_project_mana?project_name="+this.project.name,{headers:e}).toPromise().then(e=>{console.log(e),this.mana_sources=e.sources,console.log(this.mana_sources)},e=>{console.log("ok we should back out"),console.log(e),this.utilityService.presentModelAlert("Error try again")})}change_mana_type(e){this.mana_type=e}change_conjure_type(e){this.conjure_type=e}set_pipeline(e){this.pipeline=e}set_source(e){this.current_source=e,console.log(e),this.spell_tomb.mana_location="mana/"+e.file_name}get_grims(){console.log("getting grims");let e=new p.c({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});this.http.get(this.api_url+"/get_grims",{headers:e}).toPromise().then(e=>{this.grims=e.grims,console.log(this.grims)},e=>{console.log("ok we should back out"),console.log(e),this.utilityService.presentModelAlert("Error try again")})}get_spells(){console.log("getting spells");let e=new p.c({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});this.http.get(this.api_url+"/get_spells",{headers:e}).toPromise().then(e=>{console.log("got spells"),this.spells=e.spells,console.log(this.spells),this.spells.forEach(e=>{this.spells_dict[e.spell_type+"_"+e.spell_name]=e})},e=>{console.log("ok we should back out"),console.log(e),this.utilityService.presentModelAlert("Error try again")})}cast_grim(e){console.log("Going to cast grimID: "+e),console.dir(this.grims[e]),console.log("Got this spell tomb"),console.dir(this.spell_tomb);let t=this.grims[e];t.spells[0].spell_inputs=this.spell_tomb,console.log("Here is updated spell tomb"),console.dir(t);let o=new p.c({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});var n=this.api_url+"/cast_grim?project_name="+this.project.name+"&mana="+this.current_source.file_name;console.log("calling this url: "+n),this.http.post(n,t,{headers:o}).toPromise().then(e=>{console.log(e),this.showResults=!0,this.results=e,this.getCasts()},e=>{console.log("ok we should back out"),console.log(e)})}upload(){let e=this.getFiles();if(console.log(e),console.log(e[0].type),"text/csv"!=e[0].type)return void this.presentAlert();let t=new FormData;t.append("somekey","some value"),e.forEach(e=>{t.append("file_data",e.rawFile,e.name)}),console.log(t);let o=new p.c({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});var n=this.api_url+"/add_csv_mana_source?project_name="+this.project.name;console.log("calling this url: "+n),this.http.post(n,t,{headers:o}).toPromise().then(e=>{console.log(e),this.mana=e,this.getSources()},e=>{console.log("ok we should back out"),console.log(e)})}presentAlert(){return Object(s.b)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({header:"Error",message:"Must upload valid csv file",buttons:["OK"]});yield e.present()}))}clearQueue(){this.uploader.queue.length>=1&&this.uploader.queue[0].remove()}getFiles(){return this.uploader.queue.map(e=>(console.log(e),e.file))}submitCSV(){console.log("uploading file"),this.upload(),console.log("upload finished")}}return e.\u0275fac=function(t){return new(t||e)(h.Wb(p.a),h.Wb(b.a),h.Wb(c.G),h.Wb(r.a),h.Wb(u.a),h.Wb(c.a))},e.\u0275cmp=h.Qb({type:e,selectors:[["app-project-mana"]],features:[h.Lb([u.a])],decls:19,vars:4,consts:[[1,"top-content"],[3,"click"],[3,"value","ngModel","ionChange","ngModelChange"],["value","cast"],["value","conjure"],[4,"ngIf"],["text-center",""],["size","2",4,"ngFor","ngForOf"],["offset","3","size","2"],["size","2"],["offset","4","size","3",4,"ngIf"],["offset","4","size","3"],["type","file","ng2FileSelect","",3,"uploader","click"],["expand","full","color","primary","shape","round",3,"click"],["size","3",4,"ngFor","ngForOf"],["size","3"],[4,"ngFor","ngForOf"],["shape","round",3,"click"],["text-center","",4,"ngIf"],["type","text",3,"ngModel","value","ngModelChange"],["okText","Okay","cancelText","Dismiss",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["id","cast_table","datatable","",1,"row-border","hover",3,"dtOptions"],["offset","3","size","3"],["type","text","placeholder","Name",3,"ngModel","ngModelChange"],["type","text","placeholder","Description",3,"ngModel","ngModelChange"],["size","4",4,"ngFor","ngForOf"],["expand","full","shape","round",3,"click"],["id","spell_table","datatable","",1,"row-border","hover",3,"dtOptions"],["size","4"],["border","1","width","100%"],["shape","round",3,"click",4,"ngIf"],["shape","round","color","danger",3,"click",4,"ngIf"],["shape","round","color","danger",3,"click"]],template:function(e,t){1&e&&(h.Zb(0,"ion-header"),h.Zb(1,"ion-toolbar"),h.Zb(2,"ion-title"),h.uc(3," Grimoire "),h.Yb(),h.Yb(),h.Yb(),h.Zb(4,"ion-content"),h.Zb(5,"ion-row",0),h.Zb(6,"ion-col"),h.Zb(7,"a",1),h.hc("click",(function(e){return t.utilityService.navURL("/home")})),h.uc(8,"Home"),h.Yb(),h.uc(9," > Project "),h.Yb(),h.Yb(),h.Zb(10,"ion-segment",2),h.hc("ionChange",(function(e){return t.segmentChanged(e)}))("ngModelChange",(function(e){return t.spell_mode=e})),h.Zb(11,"ion-segment-button",3),h.Zb(12,"ion-label"),h.uc(13,"Cast Spells"),h.Yb(),h.Yb(),h.Zb(14,"ion-segment-button",4),h.Zb(15,"ion-label"),h.uc(16,"Conjure Spells"),h.Yb(),h.Yb(),h.Yb(),h.tc(17,A,44,4,"div",5),h.tc(18,V,22,2,"div",5),h.Yb()),2&e&&(h.Mb(10),h.nc("value",t.spell_mode),h.mc("ngModel",t.spell_mode),h.Mb(7),h.mc("ngIf","cast"==t.spell_mode),h.Mb(1),h.mc("ngIf","conjure"==t.spell_mode))},directives:[c.n,c.B,c.A,c.l,c.u,c.k,c.w,c.J,i.c,i.d,c.x,c.r,n.i,c.m,c.b,n.h,c.f,c.h,c.g,c.s,c.q,a.a,c.d,c.j,c.i,c.p,c.K,c.y,c.z,m.a],styles:[""]}),e})()}];let E=(()=>{class e{}return e.\u0275mod=h.Ub({type:e}),e.\u0275inj=h.Tb({factory:function(t){return new(t||e)},imports:[[l.i.forChild(z)],l.i]}),e})();o.d(t,"ProjectManaPageModule",(function(){return X}));let X=(()=>{class e{}return e.\u0275mod=h.Ub({type:e}),e.\u0275inj=h.Tb({factory:function(t){return new(t||e)},imports:[[n.b,i.a,c.C,m.b,a.b,E]]}),e})()}}]);