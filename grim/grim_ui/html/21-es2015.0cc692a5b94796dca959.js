(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"ct+p":function(e,t,o){"use strict";o.r(t);var n=o("ofXK"),r=o("c7TG"),i=o("3Pt+"),c=o("tyNb"),l=o("mrSG"),s=o("tk/3"),a=o("7pIB"),h=o("FAH8"),b=o("POSt"),d=o("AytR"),p=o("K1OG"),u=o("LJOF"),m=o("fXoL");function g(e,t){if(1&e){const e=m.ac();m.Zb(0,"ion-col",5),m.Zb(1,"ion-card"),m.Zb(2,"ion-card-header"),m.Zb(3,"ion-card-title"),m.Zb(4,"h1"),m.uc(5),m.Yb(),m.Yb(),m.Yb(),m.Zb(6,"ion-card-content"),m.Zb(7,"h2"),m.uc(8),m.Yb(),m.Zb(9,"ion-row"),m.Zb(10,"ion-col",6),m.Zb(11,"div",7),m.Zb(12,"ion-button",8),m.hc("click",(function(o){m.qc(e);const n=t.$implicit;return m.jc().viewProject(n)})),m.Xb(13,"ion-icon",9),m.Zb(14,"b"),m.uc(15,"Spells"),m.Yb(),m.Yb(),m.Zb(16,"span",10),m.uc(17,"Conjure Spells"),m.Yb(),m.Yb(),m.Yb(),m.Zb(18,"ion-col",6),m.Zb(19,"div",7),m.Zb(20,"ion-button",11),m.hc("click",(function(o){m.qc(e);const n=t.$implicit;return m.jc().deleteProjectAlertConfirm(n)})),m.Xb(21,"ion-icon",12),m.Yb(),m.Zb(22,"span",10),m.uc(23,"Delete Project"),m.Yb(),m.Yb(),m.Yb(),m.Yb(),m.Yb(),m.Yb(),m.Yb()}if(2&e){const e=t.$implicit;m.Mb(5),m.xc("",e.name," - ",e.desc,""),m.Mb(3),m.wc("Created: ",e.createdAt,"")}}let j=(()=>{class e{constructor(e,t,o,n,r,i,c,l){this.magicService=e,this.navCtrl=t,this.http=o,this.file_writer=n,this.modalController=r,this.loadingCtrl=i,this.alertController=c,this.utilityService=l,this.api_url=d.a.api_url,this.uploader=new a.c({}),this.hasBaseDropZoneOver=!1,this.hasAnotherDropZoneOver=!1,this.spell_tomb={},this.healthCheck(),this.getProjects()}healthCheck(){console.log("health check");let e=new s.c({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});this.http.get(this.api_url+"/health",{headers:e}).toPromise().then(e=>{console.log(e),this.health=e.healthy},e=>{console.log("ok we should back out"),console.log(e),this.utilityService.presentModelAlert("Error try again")})}deleteProjectAlertConfirm(e){return Object(l.b)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({header:"Are you sure you want to delete Project?",animated:!0,cssClass:"alertbox",mode:"ios",message:e.name+" will be deleted!!!",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:e=>{console.log("Confirm Cancel: blah")}},{text:"Yes",handler:()=>{console.log("Confirm Okay"),this.deleteProject(e)}}]});yield t.present()}))}deleteProject(e){console.log("delete project");let t=new s.c({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});this.http.delete(this.api_url+"/delete_project?project_name="+e.name,{headers:t}).toPromise().then(e=>{console.log(e),this.utilityService.presentModelAlert("Project Deleted"),this.getProjects()},e=>{console.log("ok we should back out"),console.log(e),this.utilityService.presentModelAlert("Error try again")})}newProject(){return Object(l.b)(this,void 0,void 0,(function*(){console.log("New Project clicked");const e=yield this.modalController.create({component:b.a});return e.onDidDismiss().then(e=>{this.getProjects()}),yield e.present()}))}viewProject(e){console.log("going to project page"),this.magicService.isBlank=!1,this.magicService.Data.curr_project=e,this.navCtrl.navigateForward("/project-mana")}getProjects(){console.log("getting projects");let e=new s.c({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});this.http.get(this.api_url+"/get_projects",{headers:e}).toPromise().then(e=>{console.log(e),this.projects=e.projects,console.log(this.projects)},e=>{console.log("ok we should back out"),console.log(e),this.utilityService.presentModelAlert("Error try again")})}keys(e){return Object.keys(e)}values(e){return Object.values(e)}addManaSource(){console.log("add mana source");let e=new s.c({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});this.http.get(this.api_url+"/add_mana_source?project_name="+this.projectName,{headers:e}).toPromise().then(e=>{console.log(e)},e=>{console.log("ok we should back out"),console.log(e),this.utilityService.presentModelAlert("Error try again")})}presentAlert(){return Object(l.b)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({header:"Error",message:"Must upload valid csv file",buttons:["OK"]});yield e.present()}))}}return e.\u0275fac=function(t){return new(t||e)(m.Wb(p.a),m.Wb(r.G),m.Wb(s.a),m.Wb(h.a),m.Wb(r.F),m.Wb(r.E),m.Wb(r.a),m.Wb(u.a))},e.\u0275cmp=m.Qb({type:e,selectors:[["app-home"]],features:[m.Lb([h.a])],decls:15,vars:1,consts:[["text-center",""],["col-md-4","","class","project-content","size-sm","12","size-md","3","text-center","",4,"ngFor","ngForOf"],["size-sm","12","size-md","3"],["text-center","",3,"click"],["slot","icon-only","color","primary","name","add-circle-outline",1,"item","new_icon"],["col-md-4","","size-sm","12","size-md","3","text-center","",1,"project-content"],[1,"proj_col"],[1,"tooltip"],["shape","round","color","primary",3,"click"],["slot","start","name","eye"],[1,"tooltiptext"],["shape","round","color","medium",3,"click"],["name","trash"]],template:function(e,t){1&e&&(m.Zb(0,"ion-header"),m.Zb(1,"ion-toolbar"),m.Zb(2,"ion-title"),m.uc(3," Grimoire "),m.Yb(),m.Yb(),m.Yb(),m.Zb(4,"ion-content"),m.Zb(5,"h1",0),m.uc(6,"Projects"),m.Yb(),m.Zb(7,"ion-list"),m.Zb(8,"ion-grid"),m.Zb(9,"ion-row"),m.tc(10,g,24,3,"ion-col",1),m.Zb(11,"ion-col",2),m.Zb(12,"ion-card",3),m.hc("click",(function(e){return t.newProject()})),m.Zb(13,"ion-card-content"),m.Xb(14,"ion-icon",4),m.Yb(),m.Yb(),m.Yb(),m.Yb(),m.Yb(),m.Yb(),m.Yb()),2&e&&(m.Mb(10),m.mc("ngForOf",t.projects))},directives:[r.n,r.B,r.A,r.l,r.b,r.s,r.m,r.u,n.h,r.k,r.f,r.g,r.o,r.h,r.j,r.d],styles:[".new_icon[_ngcontent-%COMP%]{font-size:100px}.item[_ngcontent-%COMP%]:hover{opacity:.5}"]}),e})();o.d(t,"HomePageModule",(function(){return y}));let y=(()=>{class e{}return e.\u0275mod=m.Ub({type:e}),e.\u0275inj=m.Tb({factory:function(t){return new(t||e)},imports:[[n.b,i.a,r.C,a.b,c.i.forChild([{path:"",component:j}])]]}),e})()}}]);