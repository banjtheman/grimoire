(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{K1OG:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("fXoL");let o=(()=>{class e{constructor(){this.Data={},this.isBlank=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},sif2:function(e,t,n){"use strict";n.r(t);var i=n("ofXK"),o=n("3Pt+"),c=n("c7TG"),r=n("tyNb"),l=n("K1OG"),s=n("LJOF"),b=n("tk/3"),a=n("AytR"),u=n("fXoL"),m=n("njyG");function g(e,t){if(1&e){const e=u.ac();u.Zb(0,"ion-button",9),u.hc("click",(function(t){return u.qc(e),u.jc(2).createGrim()})),u.uc(1,"Create Grimoire "),u.Yb()}}function h(e,t){1&e&&(u.Zb(0,"ion-button",10),u.uc(1,"Create Grimoire "),u.Yb())}function p(e,t){if(1&e){const e=u.ac();u.Zb(0,"ion-button",19),u.hc("click",(function(t){u.qc(e);const n=u.jc().$implicit;return u.jc(4).addToGrim(n)})),u.uc(1,"Add to Grimoire "),u.Yb()}}function d(e,t){if(1&e){const e=u.ac();u.Zb(0,"ion-button",20),u.hc("click",(function(t){u.qc(e);const n=u.jc().$implicit;return u.jc(4).removeFromGrim(n)})),u.uc(1,"Remove from Grimoire"),u.Yb()}}function f(e,t){if(1&e&&(u.Zb(0,"tr"),u.Zb(1,"td"),u.uc(2),u.Yb(),u.Zb(3,"td"),u.uc(4),u.Yb(),u.Zb(5,"td"),u.uc(6),u.Yb(),u.Zb(7,"td"),u.uc(8),u.Yb(),u.Zb(9,"td"),u.uc(10),u.Yb(),u.Zb(11,"td"),u.uc(12),u.Yb(),u.Zb(13,"td"),u.tc(14,p,2,0,"ion-button",17),u.tc(15,d,2,0,"ion-button",18),u.Yb(),u.Yb()),2&e){const e=t.$implicit,n=u.jc(4);u.Mb(2),u.vc(e.spell_name),u.Mb(2),u.vc(e.spell_info),u.Mb(2),u.vc(e.spell_type),u.Mb(2),u.vc(e.takes_mana),u.Mb(2),u.vc(e.reqs),u.Mb(2),u.vc(e.spell_output),u.Mb(2),u.mc("ngIf",0==n.inNewGrim(e)&&n.metRequirements(e)),u.Mb(1),u.mc("ngIf",1==n.inNewGrim(e))}}function _(e,t){if(1&e&&(u.Zb(0,"div"),u.Zb(1,"table",15),u.Zb(2,"thead"),u.Zb(3,"tr"),u.Zb(4,"th"),u.uc(5,"Spell Name"),u.Yb(),u.Zb(6,"th"),u.uc(7,"Spell Info"),u.Yb(),u.Zb(8,"th"),u.uc(9,"Spell Type"),u.Yb(),u.Zb(10,"th"),u.uc(11,"takes mana?"),u.Yb(),u.Zb(12,"th"),u.uc(13,"Requirements"),u.Yb(),u.Zb(14,"th"),u.uc(15,"Spell Output"),u.Yb(),u.Zb(16,"th"),u.uc(17,"Add Spell"),u.Yb(),u.Yb(),u.Yb(),u.Zb(18,"tbody"),u.tc(19,f,16,8,"tr",16),u.Yb(),u.Yb(),u.Yb()),2&e){const e=u.jc(3);u.Mb(1),u.mc("dtOptions",e.dtOptions),u.Mb(18),u.mc("ngForOf",e.spells)}}function w(e,t){if(1&e){const e=u.ac();u.Zb(0,"ion-button",19),u.hc("click",(function(t){u.qc(e);const n=u.jc(2).$implicit;return u.jc(5).addToGrim(n)})),u.uc(1,"Add to Grimoire "),u.Yb()}}function v(e,t){if(1&e){const e=u.ac();u.Zb(0,"ion-button",20),u.hc("click",(function(t){u.qc(e);const n=u.jc(2).$implicit;return u.jc(5).removeFromGrim(n)})),u.uc(1,"Remove from Grimoire"),u.Yb()}}function Y(e,t){if(1&e&&(u.Zb(0,"div"),u.Zb(1,"b"),u.uc(2),u.Yb(),u.Yb()),2&e){const e=u.jc(2).$implicit;u.Mb(2),u.wc("Requirements: ",e.reqs,"")}}function Z(e,t){if(1&e&&(u.Zb(0,"div"),u.Zb(1,"ion-col",23),u.Zb(2,"ion-card",2),u.Zb(3,"ion-row"),u.Zb(4,"ion-col",2),u.Xb(5,"img",24),u.Yb(),u.Yb(),u.Zb(6,"ion-card-header",2),u.Zb(7,"ion-card-title"),u.uc(8),u.Yb(),u.Zb(9,"ion-card-subtitle"),u.uc(10),u.Yb(),u.Yb(),u.Zb(11,"ion-card-content",2),u.tc(12,w,2,0,"ion-button",17),u.tc(13,v,2,0,"ion-button",18),u.tc(14,Y,3,1,"div",3),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&e){const e=u.jc().$implicit,t=u.jc(5);u.Mb(5),u.nc("src",e.spell_image,u.rc),u.Mb(3),u.wc(" ",e.spell_name," "),u.Mb(2),u.wc(" ",e.spell_info," "),u.Mb(2),u.mc("ngIf",0==t.inNewGrim(e)&&t.metRequirements(e)),u.Mb(1),u.mc("ngIf",1==t.inNewGrim(e)),u.Mb(1),u.mc("ngIf",e.reqs.length>0)}}function M(e,t){if(1&e&&(u.Zb(0,"div"),u.tc(1,Z,15,6,"div",3),u.Yb()),2&e){const e=t.$implicit,n=u.jc(5);u.Mb(1),u.mc("ngIf",1==n.checkSearch(e))}}function j(e,t){if(1&e&&(u.Zb(0,"div"),u.Zb(1,"h2"),u.uc(2),u.Yb(),u.Zb(3,"ion-row"),u.tc(4,M,2,1,"div",16),u.Yb(),u.Yb()),2&e){const e=t.$implicit,n=u.jc(4);u.Mb(2),u.wc(" ",e,""),u.Mb(2),u.mc("ngForOf",n.spells_map[e])}}function y(e,t){if(1&e){const e=u.ac();u.Zb(0,"div",21),u.Zb(1,"ion-searchbar",22),u.hc("ngModelChange",(function(t){return u.qc(e),u.jc(3).searchTerm=t})),u.Yb(),u.tc(2,j,5,2,"div",16),u.Yb()}if(2&e){const e=u.jc(3);u.Mb(1),u.mc("ngModel",e.searchTerm),u.Mb(1),u.mc("ngForOf",e.utilityService.keys(e.spells_map))}}function G(e,t){if(1&e){const e=u.ac();u.Zb(0,"div"),u.Zb(1,"ion-segment",11),u.hc("ionChange",(function(t){return u.qc(e),u.jc(2).segmentChanged(t)}))("ngModelChange",(function(t){return u.qc(e),u.jc(2).spell_view=t})),u.Zb(2,"ion-segment-button",12),u.Zb(3,"ion-label"),u.uc(4,"Card View"),u.Yb(),u.Yb(),u.Zb(5,"ion-segment-button",13),u.Zb(6,"ion-label"),u.uc(7,"Table View"),u.Yb(),u.Yb(),u.Yb(),u.tc(8,_,20,2,"div",3),u.tc(9,y,3,2,"div",14),u.Yb()}if(2&e){const e=u.jc(2);u.Mb(1),u.nc("value",e.spell_view),u.mc("ngModel",e.spell_view),u.Mb(7),u.mc("ngIf","table"==e.spell_view),u.Mb(1),u.mc("ngIf","card"==e.spell_view)}}function C(e,t){if(1&e){const e=u.ac();u.Zb(0,"div"),u.Xb(1,"br"),u.Xb(2,"br"),u.Zb(3,"ion-row"),u.Zb(4,"ion-col"),u.Zb(5,"ion-list",2),u.Zb(6,"ion-item"),u.Zb(7,"ion-label"),u.uc(8,"Grimoire Name:"),u.Yb(),u.Zb(9,"ion-input",4),u.hc("ngModelChange",(function(t){return u.qc(e),u.jc().new_grim_name=t})),u.Yb(),u.Yb(),u.Zb(10,"ion-item"),u.Zb(11,"ion-label"),u.uc(12,"Grimoire Description:"),u.Yb(),u.Zb(13,"ion-input",5),u.hc("ngModelChange",(function(t){return u.qc(e),u.jc().new_grim_desc=t})),u.Yb(),u.Yb(),u.Yb(),u.Zb(14,"div",2),u.tc(15,g,2,0,"ion-button",6),u.tc(16,h,2,0,"ion-button",7),u.Yb(),u.Xb(17,"br"),u.Xb(18,"br"),u.tc(19,G,10,4,"div",3),u.Yb(),u.Zb(20,"ion-col"),u.Zb(21,"iframe",8),u.Zb(22,"p"),u.uc(23,"Your browser does not support iframes."),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&e){const e=u.jc();u.Mb(9),u.mc("ngModel",e.new_grim_name),u.Mb(4),u.mc("ngModel",e.new_grim_desc),u.Mb(2),u.mc("ngIf",1==e.ifRealGrim()),u.Mb(1),u.mc("ngIf",0==e.ifRealGrim()),u.Mb(3),u.mc("ngIf",e.showTable)}}function k(e,t){1&e&&u.Xb(0,"div")}const O=[{path:"",component:(()=>{class e{constructor(e,t,n,i,o){this.http=e,this.magicService=t,this.navCtrl=n,this.utilityService=i,this.alertController=o,this.api_url=a.a.api_url,this.spell_mode="conjure",this.conjure_type="grim",this.new_grim=[],this.new_grim_name="",this.new_grim_desc="",this.spells_dict={},this.showTable=!1,this.spell_view="card",this.searchTerm="",this.dtOptions={}}checkSearch(e){return""==this.searchTerm||!!e.spell_name.toLowerCase().includes(this.searchTerm.toLowerCase())}ionViewDidEnter(){this.resetGrim()}ngOnInit(){this.dtOptions={pageLength:10},this.getSpells(),this.resetGrim()}ifRealGrim(){return!(this.new_grim.length<1||this.new_grim_name.length<1||this.new_grim_desc.length<1)}segmentChanged(e){console.log("Segment changed",e),this.spell_view=e.detail.value,console.log(this.spell_view)}inNewGrim(e){return-1!=this.new_grim.indexOf(e.spell_type+"_"+e.spell_name)}getSpells(){console.log("getting spells");let e=new b.c({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});this.http.get(this.api_url+"/get_spells",{headers:e}).toPromise().then(e=>{console.log("got spells"),this.spells=e.spells,this.spells_map=e.spells_map,console.log(this.spells),console.log(this.spells_map),this.spells.forEach(e=>{this.spells_dict[e.spell_type+"_"+e.spell_name]=e}),this.showTable=!0},e=>{console.log("ok we should back out"),console.log(e),this.utilityService.presentModelAlert("Error try again")})}change_conjure_type(e){this.conjure_type=e}resetGrim(){console.log("getting spells");let e=new b.c({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});this.http.get(this.api_url+"/reset_grim",{headers:e}).toPromise().then(e=>{console.log("reset grim")},e=>{console.log("problem trying to reset"),console.log(e)})}removeFromGrim(e){var t=this.new_grim.indexOf(e.spell_type+"_"+e.spell_name);this.new_grim.splice(t,1),this.testGrim()}metRequirements(e){if(0==e.reqs.length)return console.log(" it is true"),!0;var t=!0;return e.reqs.forEach(e=>{console.log("this is a req"),console.log(e),console.log(this.new_grim),-1==this.new_grim.indexOf(e)?t=!1:console.log("go on")}),t}addToGrim(e){this.new_grim.push(e.spell_type+"_"+e.spell_name),console.log(" about to test grim"),this.testGrim(),console.log(" tested grim")}createGrim(){console.log("Creating grim");let e=new b.c({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});var t=[];this.new_grim.forEach(e=>{t.push(this.spells_dict[e])});var n={};n.name=this.new_grim_name,n.value=this.new_grim_desc,n.spells=t;var i=this.api_url+"/create_grim";console.log("calling this url: "+i),this.http.post(i,n,{headers:e}).toPromise().then(e=>{if(console.log(e),e.error)return console.log("Graceful error"),void this.utilityService.presentModelAlert(e.error);this.utilityService.presentModal("Grimoire created","Complete")},e=>{console.log("ok we should back out"),console.log(e)})}testGrim(){console.log("testing grim");let e=new b.c({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});var t=[];this.new_grim.forEach(e=>{t.push(this.spells_dict[e])});var n={};n.spells=t;var i=this.api_url+"/test_grim";console.log("calling this url: "+i),this.http.post(i,n,{headers:e}).toPromise().then(e=>{console.log(e)},e=>{console.log("ok we should back out"),console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(u.Wb(b.a),u.Wb(l.a),u.Wb(c.G),u.Wb(s.a),u.Wb(c.a))},e.\u0275cmp=u.Qb({type:e,selectors:[["app-conjure"]],decls:15,vars:2,consts:[[1,"top-content"],[3,"click"],["text-center",""],[4,"ngIf"],["type","text","placeholder","Name",3,"ngModel","ngModelChange"],["type","text","placeholder","Description",3,"ngModel","ngModelChange"],["shape","round","color","warning",3,"click",4,"ngIf"],["shape","round","color","warning","disabled","",4,"ngIf"],["src","http://localhost:8501/"],["shape","round","color","warning",3,"click"],["shape","round","color","warning","disabled",""],[3,"value","ngModel","ionChange","ngModelChange"],["value","card"],["value","table"],["scrollY","true","class","card-view",4,"ngIf"],["id","spell_table","datatable","",1,"row-border","hover",3,"dtOptions"],[4,"ngFor","ngForOf"],["shape","round",3,"click",4,"ngIf"],["shape","round","color","danger",3,"click",4,"ngIf"],["shape","round",3,"click"],["shape","round","color","danger",3,"click"],["scrollY","true",1,"card-view"],[3,"ngModel","ngModelChange"],["size","4"],[1,"spell_image",3,"src"]],template:function(e,t){1&e&&(u.Zb(0,"ion-header"),u.Zb(1,"ion-toolbar"),u.Zb(2,"ion-title"),u.uc(3," Grimoire "),u.Yb(),u.Yb(),u.Yb(),u.Zb(4,"ion-content"),u.Zb(5,"ion-row",0),u.Zb(6,"ion-col"),u.Zb(7,"a",1),u.hc("click",(function(e){return t.utilityService.navURL("/new-home")})),u.uc(8,"Home"),u.Yb(),u.uc(9," > Conjure "),u.Yb(),u.Yb(),u.Zb(10,"ion-grid"),u.Zb(11,"h2",2),u.uc(12,"Create new Grimoires"),u.Yb(),u.tc(13,C,24,5,"div",3),u.tc(14,k,1,0,"div",3),u.Yb(),u.Yb()),2&e&&(u.Mb(13),u.mc("ngIf","grim"==t.conjure_type),u.Mb(1),u.mc("ngIf","spell"==t.conjure_type))},directives:[c.n,c.B,c.A,c.l,c.u,c.k,c.m,c.b,i.i,c.s,c.q,c.r,c.p,c.K,o.c,o.d,c.d,c.w,c.J,c.x,m.a,i.h,c.v,c.f,c.h,c.j,c.i,c.g],styles:[".card-view[_ngcontent-%COMP%]{height:65vh;overflow-y:auto}.spell_image[_ngcontent-%COMP%]{height:150px;width:150px;display:block;margin-left:auto;margin-right:auto}","iframe[_ngcontent-%COMP%] {\n              height: 100%;\n              width: 100%;\n              frameborder: 0;\n            }"]}),e})()}];let q=(()=>{class e{}return e.\u0275mod=u.Ub({type:e}),e.\u0275inj=u.Tb({factory:function(t){return new(t||e)},imports:[[r.i.forChild(O)],r.i]}),e})();n.d(t,"ConjurePageModule",(function(){return I}));let I=(()=>{class e{}return e.\u0275mod=u.Ub({type:e}),e.\u0275inj=u.Tb({factory:function(t){return new(t||e)},imports:[[i.b,o.a,c.C,m.b,q]]}),e})()}}]);